2025-05-13 17:21:51.215 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:21:51.478 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:21:51.506 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:21:51.567 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:21:51.588 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/sqls | path=http://testserver/imgplt/sqls | trace_id=9d691d2efaa1e39d97c81cf8905fcc2f | span_id=ac9aae378a15bf12
2025-05-13 17:21:51.591 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/sqls | path=http://testserver/imgplt/sqls | trace_id=ed5f6d981cacf3b114302c8fbf421b15 | span_id=61937765c3f1ced0
2025-05-13 17:21:51.593 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/sqls | path=http://testserver/imgplt/sqls | trace_id=8280ebf34fc0b0cf5cad27f6aee8e886 | span_id=f487d2aadf4ecce2
2025-05-13 17:21:51.594 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/sqls | path=http://testserver/imgplt/sqls | trace_id=d763fe505d45aba843946aff56456186 | span_id=ac9f8418e7fed78b
2025-05-13 17:21:51.595 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /ping | path=http://testserver/ping | trace_id=b64854b9ff32e7455481c94ea5e96573 | span_id=ee6f0efbd2b16dfd
2025-05-13 17:21:51.597 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /ping-not-exist | path=http://testserver/ping-not-exist | trace_id=89a5450b843af7a90f87197a3333488 | span_id=535aae43f309a5d6
2025-05-13 17:21:51.599 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /topics | path=http://testserver/topics | trace_id=ae9847e00f3cb1c15bf278a761ec35fd | span_id=f7ccafbd221cac71
2025-05-13 17:21:51.600 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /topics-invalid | path=http://testserver/topics-invalid | trace_id=e23aeb4abca12d5e70bc809d0a331251 | span_id=5df7e0758e9131ff
2025-05-13 17:21:51.601 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/curs | path=http://testserver/imgplt/curs | trace_id=10ec1317529723c7e6e75812dfdb0dd1 | span_id=988a892cb50ebc86
2025-05-13 17:21:51.603 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/curs | path=http://testserver/imgplt/curs | trace_id=777194c50cffeb15b0b9ea1342d546dc | span_id=6bdf53ee85d62e0e
2025-05-13 17:21:51.604 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /aliases | path=http://testserver/aliases?user_id=test | trace_id=54216df4d8da04811c61d3d50217160c | span_id=28253b181d609e5
2025-05-13 17:21:51.606 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /aliases | path=http://testserver/aliases | trace_id=30a626a422d60a9e382b613fd5d1e572 | span_id=587ef2f08901278
2025-05-13 17:21:51.608 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/sqls | path=http://testserver/imgplt/sqls?query=SELECT+1 | trace_id=6e2b69ca61e05e886cb8a23a4c78b4c8 | span_id=63509100a7f5d46d
2025-05-13 17:21:51.608 | INFO     | app.domains.file.services.impl.meta_query_service:query_metadata:29 - [MetaQueryService] 메타데이터 조회 시도: query=SELECT 1
2025-05-13 17:21:51.608 | INFO     | app.domains.file.services.impl.meta_query_service:query_metadata:36 - [MetaQueryService] 메타데이터 조회 성공: result_count=2
2025-05-13 17:21:51.609 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/sqls | path=http://testserver/imgplt/sqls | trace_id=e1bedd16c8e7bdccc9046d79e7dbe35d | span_id=1f9b259d9cfa015d
2025-05-13 17:21:51.611 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /ping | path=http://testserver/ping | trace_id=c8b5c774ee8a6699ca9a6ef6a2dcb0a4 | span_id=5a745a552952121
2025-05-13 17:21:51.612 | INFO     | app.domains.file.api.routes.routes:ping:23 - [file] /ping called
2025-05-13 17:21:51.613 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /ping-not-exist | path=http://testserver/ping-not-exist | trace_id=c58ad33ab69ffd49b97e0aa2f283cb68 | span_id=1e9609ab2ae40546
2025-05-13 17:21:51.615 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/test-topic | path=http://testserver/topics/test-topic | trace_id=54dfaa85ed2a0e1ffc1a11f2dd0ce614 | span_id=faedb9d08977744d
2025-05-13 17:21:51.615 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:119 - [FILE] /topics/test-topic called with metadata: {'file_id': 'abc', 'filename': 'test.png', 'owner': 'user1', 'size': 12345, 'user': None}
2025-05-13 17:21:51.615 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:121 - [FILE] Kafka produce result: topic='test-topic' message='{"file_id": "abc", "filename": "test.png", "owner": "user1", "size": 12345, "user": null}' status='queued'
2025-05-13 17:21:51.617 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/test-topic | path=http://testserver/topics/test-topic | trace_id=fb51f7b81bf116e338f31fa884ff22ce | span_id=48561a1185409137
2025-05-13 17:21:51.618 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/not_exist_topic | path=http://testserver/topics/not_exist_topic | trace_id=a88b77d766dc7995b869e93cab30e7b2 | span_id=e252ff56d5249e2a
2025-05-13 17:21:51.619 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:119 - [FILE] /topics/not_exist_topic called with metadata: {'file_id': 'abc', 'filename': 'test.png', 'owner': 'user1', 'size': 12345, 'user': None}
2025-05-13 17:21:51.619 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:121 - [FILE] Kafka produce result: topic='not_exist_topic' message='{"file_id": "abc", "filename": "test.png", "owner": "user1", "size": 12345, "user": null}' status='queued'
2025-05-13 17:21:51.620 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/list/uploads/2025/ | path=http://testserver/imgplt/list/uploads/2025/ | trace_id=a6bee4f1551dbad43de082af6c0e321d | span_id=522b108e5e488e5d
2025-05-13 17:21:51.660 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/list/ | path=http://testserver/imgplt/list/ | trace_id=377eafa73fdee2c8c6c589c335f49680 | span_id=d873d5bb3dbefb48
2025-05-13 17:21:51.661 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/s3/test.txt | path=http://testserver/imgplt/s3/test.txt | trace_id=43837ac58e25cbef067f8b8cd31f642c | span_id=9f5e7bf1e0553f2b
2025-05-13 17:21:51.661 | INFO     | app.domains.file.services.impl.presigned_service:create_presigned_url:23 - [PresignedService] presigned URL 생성 시도: file_path=test.txt
2025-05-13 17:21:51.661 | INFO     | app.domains.file.services.impl.presigned_service:create_presigned_url:28 - [PresignedService] presigned URL 생성 성공: url=https://minio.local/bucket/test.txt?presigned=1
2025-05-13 17:21:51.662 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/s3/ | path=http://testserver/imgplt/s3/ | trace_id=d703c26124f0152d8338266b8a3d21db | span_id=3f57a06f1cd11552
2025-05-13 17:21:51.664 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/zips | path=http://testserver/imgplt/zips?sql=SELECT+1 | trace_id=1cfca6a1d0e43e148ff43708193aae1b | span_id=a771088563d2d805
2025-05-13 17:21:51.664 | INFO     | app.domains.file.services.impl.zip_presigned_service:create_zip_presigned_url:23 - [ZipPresignedService] zip presigned URL 생성 시도: sql=SELECT 1
2025-05-13 17:21:51.664 | INFO     | app.domains.file.services.impl.zip_presigned_service:create_zip_presigned_url:32 - [ZipPresignedService] zip presigned URL 생성 성공: url=https://dummy-presigned-url.com/download/zip?sql=SELECT 1
2025-05-13 17:21:51.665 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/zips | path=http://testserver/imgplt/zips | trace_id=ed75c320ec8cd23a3cd75175f909c5c5 | span_id=4f0692ad82d2f355
2025-05-13 17:21:51.666 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /upload | path=http://testserver/upload | trace_id=b5a47c28cee43b9394ae90e9e305c188 | span_id=8ad21594987cc52c
2025-05-13 17:21:51.669 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /upload | path=http://testserver/upload | trace_id=886feed26f1825c6f78934f1488512bd | span_id=88a73894ead14bd8
2025-05-13 17:21:51.671 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /upload | path=http://testserver/upload | trace_id=e7e6da95c98b705b01d616d8d6216eba | span_id=927063a297da4cc
2025-05-13 17:21:51.672 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /auth/workspaces | path=http://testserver/auth/workspaces | trace_id=6aaa1de840a0e661b08c47b4db3f03ad | span_id=6122864f7a26903c
2025-05-13 17:21:51.675 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /auth/workspaces | path=http://testserver/auth/workspaces | trace_id=335d6756f87bff19a4f68aa2b817dcd8 | span_id=1ab5595b8eafdbaf
2025-05-13 17:21:51.677 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /ping | path=http://testserver/ping | trace_id=4beaa7739bf688e1bb9c4d5a2ca9fbcb | span_id=f3f51ed25be1a98a
2025-05-13 17:25:44.737 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:25:44.854 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:25:44.857 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:25:44.995 | INFO     | app.domains.gateway.main:on_startup:89 - Gateway service started.
2025-05-13 17:25:44.995 | INFO     | app.domains.gateway.main:on_startup:90 - [gateway] AUTH_MODE=local
2025-05-13 17:25:44.995 | INFO     | app.domains.gateway.main:on_startup:92 - [gateway] AUTH_LOCAL_TOKEN=dev-token
2025-05-13 17:25:45.174 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:26:13.694 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/docs | path=http://localhost:8000/gateway/docs | trace_id=6757f9dd393c30bfd914709af0ebaa19 | span_id=b3cd9d47840d16f2
2025-05-13 17:26:14.102 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/openapi.json | path=http://localhost:8000/gateway/openapi.json | trace_id=3aeccfd2c4b8f738cf51c946e4e39173 | span_id=bb6f9944ea978380
2025-05-13 17:26:22.933 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/ping | path=http://localhost:8000/gateway/ping | trace_id=1c31ed7814e31aadcff934fc57e9cf3 | span_id=b3c9c9169ac23f89
2025-05-13 17:26:22.959 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/data/ping | path=http://localhost:8000/gateway/data/ping | trace_id=206339e92ff7d12c9b995bc2b330ffb9 | span_id=d91a4d8e981f7887
2025-05-13 17:26:22.993 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/file/imgplt/aliases | path=http://localhost:8000/gateway/file/imgplt/aliases | trace_id=4e29ecae04e2f16e9e2f4db7c65aa26e | span_id=eeb169a505238721
2025-05-13 17:26:23.122 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /aliases | path=http://localhost:8001/aliases?user_id=test-user | trace_id=50c3b7b3c4a96cca316a70c4acee0753 | span_id=87df2ec9ee01e38
2025-05-13 17:26:23.140 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/file/imgplt/s3/test.txt | path=http://localhost:8000/gateway/file/imgplt/s3/test.txt | trace_id=306a0ae71338308c98d7f25719521447 | span_id=7594d57e3e9d62ca
2025-05-13 17:26:23.162 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/s3/test.txt | path=http://localhost:8001/imgplt/s3/test.txt | trace_id=29bfb9786f4831426266936d62e10d6d | span_id=15915a864a91d661
2025-05-13 17:26:23.163 | INFO     | app.domains.file.services.impl.presigned_service:create_presigned_url:23 - [PresignedService] presigned URL 생성 시도: file_path=test.txt
2025-05-13 17:26:23.163 | INFO     | app.domains.file.services.impl.presigned_service:create_presigned_url:28 - [PresignedService] presigned URL 생성 성공: url=https://minio.local/bucket/test.txt?presigned=1
2025-05-13 17:26:23.172 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/file/imgplt/zips | path=http://localhost:8000/gateway/file/imgplt/zips?sql=SELECT%20*%20FROM%20files | trace_id=fb0b3b8a2a7761085f9c4a0e867991a4 | span_id=77cbf1966cf32442
2025-05-13 17:26:23.191 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/zips | path=http://localhost:8001/imgplt/zips?sql=SELECT%20*%20FROM%20files | trace_id=d86612f2201f15b04d0f96334e210fb9 | span_id=3bf6d540eaa2671e
2025-05-13 17:26:23.192 | INFO     | app.domains.file.services.impl.zip_presigned_service:create_zip_presigned_url:23 - [ZipPresignedService] zip presigned URL 생성 시도: sql=SELECT * FROM files
2025-05-13 17:26:23.192 | INFO     | app.domains.file.services.impl.zip_presigned_service:create_zip_presigned_url:32 - [ZipPresignedService] zip presigned URL 생성 성공: url=https://dummy-presigned-url.com/download/zip?sql=SELECT * FROM files
2025-05-13 17:26:23.201 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/file/imgplt/sqls | path=http://localhost:8000/gateway/file/imgplt/sqls?query=SELECT%20*%20FROM%20files | trace_id=b9040a92384323f33b101bc1e2f3ec84 | span_id=730dcb0c8d5149eb
2025-05-13 17:26:23.221 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /imgplt/sqls | path=http://localhost:8001/imgplt/sqls?query=SELECT%20*%20FROM%20files | trace_id=c93e25fc69ec05ffe156296def9cc52f | span_id=28444a22f3a8e1ad
2025-05-13 17:26:23.221 | INFO     | app.domains.file.services.impl.meta_query_service:query_metadata:29 - [MetaQueryService] 메타데이터 조회 시도: query=SELECT * FROM files
2025-05-13 17:26:23.221 | INFO     | app.domains.file.services.impl.meta_query_service:query_metadata:36 - [MetaQueryService] 메타데이터 조회 성공: result_count=2
2025-05-13 17:26:23.230 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/file/topics/test-topic | path=http://localhost:8000/gateway/file/topics/test-topic | trace_id=8ba96c4050b8d7f894e62338aa955f6a | span_id=bdb6538e9b494f8a
2025-05-13 17:26:23.251 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/test-topic | path=http://localhost:8001/topics/test-topic | trace_id=dbcb559fb361d1439adc3b140bc37262 | span_id=bfd01d54b9d2c07b
2025-05-13 17:26:23.252 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:119 - [FILE] /topics/test-topic called with metadata: {'file_id': 'testfile1', 'filename': 'test.txt', 'owner': 'user1', 'size': 12345, 'user': None}
2025-05-13 17:26:23.252 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:121 - [FILE] Kafka produce result: topic='test-topic' message='{"file_id": "testfile1", "filename": "test.txt", "owner": "user1", "size": 12345, "user": null}' status='queued'
2025-05-13 17:26:23.261 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/data/topics | path=http://localhost:8000/gateway/data/topics | trace_id=2b2f376ccce46428972eab4ef62810f9 | span_id=7ce09f71dcaa75de
2025-05-13 17:26:23.282 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /topics | path=http://localhost:8002/topics | trace_id=c66efc7c6fb5b7a99d647887e5b54ec | span_id=4d0ae81db12bd895
2025-05-13 17:26:23.293 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/data/topics/test-table | path=http://localhost:8000/gateway/data/topics/test-table | trace_id=b989263b343753fedb904ccc9dc0558d | span_id=e4f6594aed3f1e1a
2025-05-13 17:26:23.313 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/test-table | path=http://localhost:8002/topics/test-table | trace_id=ca18a0da696b82f09710aef028979c72 | span_id=8a72faccc48b227b
2025-05-13 17:26:23.324 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/data/imgplt/curs | path=http://localhost:8000/gateway/data/imgplt/curs | trace_id=e254309febfc773afea9ceb899c2327b | span_id=25dc0e120ef618dc
2025-05-13 17:26:23.343 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/curs | path=http://localhost:8002/imgplt/curs | trace_id=54e17b809103d0be1adb337b2e8ebbff | span_id=65bd4418b05579b6
2025-05-13 17:26:23.352 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/data/imgplt/sqls | path=http://localhost:8000/gateway/data/imgplt/sqls | trace_id=3ba65f50ba410f051e9a58527a12bbae | span_id=5d162e233b660a7
2025-05-13 17:26:23.371 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /imgplt/sqls | path=http://localhost:8002/imgplt/sqls | trace_id=a651b6d01596134019cfe61dea685438 | span_id=f5a151f5ef3bbff8
2025-05-13 17:26:23.380 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] GET /gateway/auth/imgplt/auths | path=http://localhost:8000/gateway/auth/imgplt/auths | trace_id=55364b98ecdd0f246d6aff66f1b02b92 | span_id=336dbc9af3c136bc
2025-05-13 17:29:16.613 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/file/upload/file-meta/test | path=http://localhost:8000/gateway/file/upload/file-meta/test | trace_id=93ca0d87798f10570df59467788653eb | span_id=60f51000dc5cd9fa
2025-05-13 17:29:18.106 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:29 - [Gateway] 파일 업로드 요청 시작: filename=1. CitrixWorkspaceApp_MAC_2107 (1).dmg, content_type=application/x-apple-diskimage
2025-05-13 17:29:18.106 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:34 - [Gateway] 파일 크기: 252677436 bytes
2025-05-13 17:29:18.106 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:40 - [Gateway] 메타데이터 파싱 시도: *test.json
2025-05-13 17:29:18.106 | INFO     | app.domains.gateway.services.impl.file_upload_service:_parse_metadata_file:84 - [Gateway] 메타데이터 파일 파싱 시도: *test.json
2025-05-13 17:29:18.106 | INFO     | app.domains.gateway.services.impl.file_upload_service:_parse_metadata_file:88 - [Gateway] 메타데이터 파일 파싱 성공: file_id='abc123' filename='test.png' owner='user1' size=12345 user=None
2025-05-13 17:29:18.216 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:65 - [멀티파트 업로드 시작] 파일명=da9a8c4a-ffc3-44b6-9430-d24f49fe1376_1. CitrixWorkspaceApp_MAC_2107 (1).dmg, 전체용량=252677436 bytes, chunk=20971520 bytes
2025-05-13 17:29:18.220 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 20971520/252677436 bytes (8%) part=1
2025-05-13 17:29:18.223 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 41943040/252677436 bytes (16%) part=2
2025-05-13 17:29:18.227 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 62914560/252677436 bytes (24%) part=3
2025-05-13 17:29:18.231 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 83886080/252677436 bytes (33%) part=4
2025-05-13 17:29:18.235 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 104857600/252677436 bytes (41%) part=5
2025-05-13 17:29:18.242 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 125829120/252677436 bytes (49%) part=6
2025-05-13 17:29:18.247 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 146800640/252677436 bytes (58%) part=7
2025-05-13 17:29:18.255 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 167772160/252677436 bytes (66%) part=8
2025-05-13 17:29:18.267 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 188743680/252677436 bytes (74%) part=9
2025-05-13 17:29:18.274 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 209715200/252677436 bytes (82%) part=10
2025-05-13 17:29:18.281 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 230686720/252677436 bytes (91%) part=11
2025-05-13 17:29:18.286 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 251658240/252677436 bytes (99%) part=12
2025-05-13 17:29:18.286 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:77 - [업로드 진행] 252677436/252677436 bytes (100%) part=13
2025-05-13 17:29:18.292 | ERROR    | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:48 - [Gateway] 전체 업로드 실패: name 'KafkaMessageProducer' is not defined
2025-05-13 17:29:18.293 | WARNING  | app.domains.log.services.common.sentry:capture_exception:31 - [Sentry fallback] SENTRY_DSN 미설정, 예외만 출력: name 'KafkaMessageProducer' is not defined
2025-05-13 17:29:18.299 | ERROR    | app.domains.gateway.main:global_exception_handler:71 - [Global Exception Handler] POST http://localhost:8000/gateway/file/upload/file-meta/test - name 'KafkaMessageProducer' is not defined
2025-05-13 17:34:05.352 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:34:05.470 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:34:05.476 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:34:05.660 | INFO     | app.domains.gateway.main:on_startup:89 - Gateway service started.
2025-05-13 17:34:05.660 | INFO     | app.domains.gateway.main:on_startup:90 - [gateway] AUTH_MODE=local
2025-05-13 17:34:05.660 | INFO     | app.domains.gateway.main:on_startup:92 - [gateway] AUTH_LOCAL_TOKEN=dev-token
2025-05-13 17:34:05.845 | INFO     | app.common.logging:setup_logging:19 - Loguru logging is configured.
2025-05-13 17:34:10.714 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /gateway/file/upload/file-meta/test | path=http://localhost:8000/gateway/file/upload/file-meta/test | trace_id=909c43b3fa0485d065b217c811216925 | span_id=9b3b3a51517c0b7c
2025-05-13 17:34:12.209 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:29 - [Gateway] 파일 업로드 요청 시작: filename=1. CitrixWorkspaceApp_MAC_2107 (1).dmg, content_type=application/x-apple-diskimage
2025-05-13 17:34:12.209 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:34 - [Gateway] 파일 크기: 252677436 bytes
2025-05-13 17:34:12.209 | INFO     | app.domains.gateway.services.impl.file_upload_service:upload_file_and_metadata_file:40 - [Gateway] 메타데이터 파싱 시도: *test.json
2025-05-13 17:34:12.209 | INFO     | app.domains.gateway.services.impl.file_upload_service:_parse_metadata_file:84 - [Gateway] 메타데이터 파일 파싱 시도: *test.json
2025-05-13 17:34:12.209 | INFO     | app.domains.gateway.services.impl.file_upload_service:_parse_metadata_file:88 - [Gateway] 메타데이터 파일 파싱 성공: file_id='abc123' filename='test.png' owner='user1' size=12345 user=None
2025-05-13 17:34:12.302 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:66 - [멀티파트 업로드 시작] 파일명=42f9dbf0-ad87-4316-96ef-f78b342b26f4_1. CitrixWorkspaceApp_MAC_2107 (1).dmg, 전체용량=252677436 bytes, chunk=20971520 bytes
2025-05-13 17:34:12.304 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 20971520/252677436 bytes (8%) part=1
2025-05-13 17:34:12.307 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 41943040/252677436 bytes (16%) part=2
2025-05-13 17:34:12.310 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 62914560/252677436 bytes (24%) part=3
2025-05-13 17:34:12.316 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 83886080/252677436 bytes (33%) part=4
2025-05-13 17:34:12.323 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 104857600/252677436 bytes (41%) part=5
2025-05-13 17:34:12.330 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 125829120/252677436 bytes (49%) part=6
2025-05-13 17:34:12.337 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 146800640/252677436 bytes (58%) part=7
2025-05-13 17:34:12.344 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 167772160/252677436 bytes (66%) part=8
2025-05-13 17:34:12.351 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 188743680/252677436 bytes (74%) part=9
2025-05-13 17:34:12.358 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 209715200/252677436 bytes (82%) part=10
2025-05-13 17:34:12.370 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 230686720/252677436 bytes (91%) part=11
2025-05-13 17:34:12.385 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 251658240/252677436 bytes (99%) part=12
2025-05-13 17:34:12.387 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:78 - [업로드 진행] 252677436/252677436 bytes (100%) part=13
2025-05-13 17:34:12.392 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:90 - [검수] 파일 42f9dbf0-ad87-4316-96ef-f78b342b26f4_1. CitrixWorkspaceApp_MAC_2107 (1).dmg 업로드 후 무결성 검증 (dummy)
2025-05-13 17:34:12.392 | INFO     | app.domains.file.services.impl.uploader_service:upload_file:91 - [멀티파트 업로드 완료] 파일명=42f9dbf0-ad87-4316-96ef-f78b342b26f4_1. CitrixWorkspaceApp_MAC_2107 (1).dmg, 전체용량=252677436 bytes
2025-05-13 17:34:12.396 | INFO     | app.domains.gateway.services.impl.file_upload_service:_upload_file_and_produce_metadata:193 - [Gateway] 파일 업로드 응답: {"filename": "42f9dbf0-ad87-4316-96ef-f78b342b26f4_1. CitrixWorkspaceApp_MAC_2107 (1).dmg", "status": "uploaded", "location": "memory://filedepot-bucket/42f9dbf0-ad87-4316-96ef-f78b342b26f4_1. CitrixWorkspaceApp_MAC_2107 (1).dmg", "error": "", "kafka_result": {"topic": "file_metadata", "status": "dummy"}}
2025-05-13 17:34:12.427 | INFO     | app.domains.log.services.common.middleware:dispatch:21 - [access] POST /topics/test | path=http://localhost:8001/topics/test | trace_id=8b72775fbbb23f3b5dbc0458aa978bdc | span_id=ea76721a99a89bdb
2025-05-13 17:34:12.431 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:119 - [FILE] /topics/test called with metadata: {'file_id': 'abc123', 'filename': 'test.png', 'owner': 'user1', 'size': 12345, 'user': None}
2025-05-13 17:34:12.431 | INFO     | app.domains.file.api.routes.routes:produce_metadata_to_kafka:121 - [FILE] Kafka produce result: topic='test' message='{"file_id": "abc123", "filename": "test.png", "owner": "user1", "size": 12345, "user": null}' status='queued'
